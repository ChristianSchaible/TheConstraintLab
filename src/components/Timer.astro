---
---

<div id="timer-container" class="timer" role="button" tabindex="0" aria-pressed="false" aria-label="15 minute timer. Click to start. Double-click to reset.">
  <div id="timer-display" class="time" aria-live="polite">15:00</div>
  <div id="timer-status" class="status">Click to start</div>
</div>

<style>
  .timer {
    padding: 1rem;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0.25rem;
    border: 2px solid #0ea5e9;
    border-radius: 20px;
    cursor: pointer;
    user-select: none;
    background: white;
  }
  .timer:focus { outline: 3px solid rgba(14,165,233,0.18); }
  .time {
    font-size: 1.5rem;
    font-weight: 700;
    letter-spacing: 0.02em;
  }
  .status {
    font-size: 0.9rem;
    color: #2563eb;
  }
  .timer.running { background: #0ea5e9; color: white; }
  .timer:hover {
    background-color: #0ea5e9;
    color: white;
    transform: scale(1.02);
    transition: background-color 0.18s ease, transform 0.18s ease;
    border-radius: 20px;
  }
</style>

<script type="module">
  const DURATION = 15 * 60; // seconds
  const container = document.getElementById('timer-container');
  const display = document.getElementById('timer-display');
  const status = document.getElementById('timer-status');

  let remaining = DURATION;
  let intervalId = null;
  let running = false; // true once started

  function formatTime(s) {
    const m = Math.floor(s / 60).toString().padStart(2, '0');
    const sec = (s % 60).toString().padStart(2, '0');
    return `${m}:${sec}`;
  }

  function updateUI() {
    display.textContent = formatTime(remaining);
    if (running) {
      container.classList.add('running');
      status.textContent = '';
      container.setAttribute('aria-pressed', 'true');
    } else if (remaining === 0) {
      container.classList.remove('running');
      status.textContent = '';
      container.setAttribute('aria-pressed', 'false');
    } else {
      container.classList.remove('running');
      status.textContent =   '';
      container.setAttribute('aria-pressed', 'false');
    }
  }

  function tick() {
    if (remaining <= 0) {
      clearInterval(intervalId);
      intervalId = null;
      running = false;
      remaining = 0;
      updateUI();
      return;
    }
    remaining -= 1;
    updateUI();
  }

  function start() {
    if (running) return; // start only once until reset
    if (remaining <= 0) remaining = DURATION;
    running = true;
    updateUI();
    intervalId = setInterval(tick, 1000);
  }

  function reset() {
    pause();
    remaining = DURATION;
    updateUI();
  }

  // Click toggles start/pause; double-click resets
  container.addEventListener('click', (e) => {
    start();
  });
  container.addEventListener('dblclick', (e) => {
    reset();
  });

  // Keyboard support: Space or Enter toggles, r resets
  container.addEventListener('keydown', (e) => {
    if (e.key === ' ' || e.key === 'Enter') {
      e.preventDefault();
      start();
    } else if (e.key.toLowerCase() === 'r') {
      reset();
    }
  });

  // Initialize UI
  updateUI();

  // Clean up on page unload
  window.addEventListener('beforeunload', () => {
    if (intervalId) clearInterval(intervalId);
  });
</script>
